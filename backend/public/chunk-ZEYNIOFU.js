import{a as u}from"./chunk-YECV26LB.js";import{F as h,I as d,L as s,Nb as i,Ob as p,j as a,k as l,s as c}from"./chunk-KV2FSBEJ.js";var f=class n{constructor(r,e){this.http=r;this.cookieService=e}baseUrl="http://localhost:3000/api/usuarios";buscarUsuarios(r="",e=1,o=10){let t=this.cookieService.get("jwt");if(!t)throw console.error("Error: El token no est\xE1 definido. Por favor, inicie sesi\xF3n."),new Error("El token no est\xE1 definido.");let b=new i({Authorization:`Bearer ${t}`,"Content-Type":"application/json"});return this.http.get(`${this.baseUrl}/buscar?q=${r}&page=${e}&itemsPerPage=${o}`,{headers:b,withCredentials:!0})}listarTodosUsuarios(r=1,e=10){let o=this.cookieService.get("jwt");if(!o)throw console.error("Error: El token no est\xE1 definido. Por favor, inicie sesi\xF3n."),new Error("El token no est\xE1 definido.");let t=new i({Authorization:`Bearer ${o}`,"Content-Type":"application/json"});return this.http.get(`${this.baseUrl}/todos?page=${r}&itemsPerPage=${e}`,{headers:t,withCredentials:!0})}explorarUsuarios(r=1,e=10){let o=this.cookieService.get("jwt");if(!o)throw console.error("Error: El token no est\xE1 definido. Por favor, inicie sesi\xF3n."),new Error("El token no est\xE1 definido.");let t=new i({Authorization:`Bearer ${o}`,"Content-Type":"application/json"});return this.http.get(`${this.baseUrl}/explorar?page=${r}&itemsPerPage=${e}`,{headers:t,withCredentials:!0})}obtenerPerfil(r){let e=`${this.baseUrl}/perfil`;r&&(e+=`/${r}`);let o=this.cookieService.get("jwt");if(!o)throw console.error("Error: El token no est\xE1 definido. Por favor, inicie sesi\xF3n."),new Error("El token no est\xE1 definido.");let t=new i({Authorization:`Bearer ${o}`,"Content-Type":"application/json"});return this.http.get(e,{headers:t,withCredentials:!0})}seguirUsuario(r){let e=this.cookieService.get("jwt");if(!e)throw console.error("Error: El token no est\xE1 definido. Por favor, inicie sesi\xF3n."),new Error("El token no est\xE1 definido.");let o=new i({Authorization:`Bearer ${e}`,"Content-Type":"application/json"});return this.http.post(`${this.baseUrl}/seguir/${r}`,{},{headers:o,withCredentials:!0})}dejarDeSeguir(r){let e=this.cookieService.get("jwt");if(!e)throw console.error("Error: El token no est\xE1 definido. Por favor, inicie sesi\xF3n."),new Error("El token no est\xE1 definido.");let o=new i({Authorization:`Bearer ${e}`,"Content-Type":"application/json",Accept:"application/json"});return console.log(`Intentando dejar de seguir al usuario ${r}`),console.log(`URL: ${this.baseUrl}/seguir/${r}`),console.log(`Token: ${e.substring(0,10)}...`),this.http.delete(`${this.baseUrl}/seguir/${r}`,{headers:o,withCredentials:!0,responseType:"json",observe:"response"}).pipe(h(t=>console.log("Respuesta a dejarDeSeguir:",t)),l(t=>t.body),c(t=>(console.error("Error en dejarDeSeguir:",t),a(()=>new Error(`Error al dejar de seguir: ${t.message||"Error desconocido"}`)))))}listarSeguidores(r){let e=this.cookieService.get("jwt");if(!e)throw console.error("Error: El token no est\xE1 definido. Por favor, inicie sesi\xF3n."),new Error("El token no est\xE1 definido.");let o=`${this.baseUrl}/seguidores`;r&&(o+=`/${r}`);let t=new i({Authorization:`Bearer ${e}`,"Content-Type":"application/json"});return this.http.get(o,{headers:t,withCredentials:!0})}listarSeguidos(r){let e=this.cookieService.get("jwt");if(!e)throw console.error("Error: El token no est\xE1 definido. Por favor, inicie sesi\xF3n."),new Error("El token no est\xE1 definido.");let o=`${this.baseUrl}/seguidos`;r&&(o+=`/${r}`);let t=new i({Authorization:`Bearer ${e}`,"Content-Type":"application/json"});return this.http.get(o,{headers:t,withCredentials:!0})}static \u0275fac=function(e){return new(e||n)(s(p),s(u))};static \u0275prov=d({token:n,factory:n.\u0275fac,providedIn:"root"})};export{f as a};
