import{a as j}from"./chunk-ZEYNIOFU.js";import{a as N}from"./chunk-2JGTSTN5.js";import{a as V}from"./chunk-7VE3XDZN.js";import"./chunk-YECV26LB.js";import{$a as r,Ca as c,Db as U,Ea as E,Eb as y,Fb as R,Ia as s,Ja as n,Ka as v,Kb as k,La as S,Ma as I,Na as x,P as m,Pa as h,Q as g,Qa as u,Wb as T,Yb as A,_a as b,ab as f,bb as d,cb as w,ia as C,kb as D,la as o,pa as _,qb as P,ta as M,ya as p}from"./chunk-KV2FSBEJ.js";var z=t=>({following:t});function $(t,i){if(t&1&&(s(0,"p")(1,"strong"),r(2,"Nombre completo:"),n(),r(3),n()),t&2){let e=u(2);o(3),w(" ",e.usuario.Nombre," ",e.usuario.Apellidos," ")}}function Y(t,i){if(t&1&&(s(0,"p")(1,"strong"),r(2,"Pa\xEDs:"),n(),r(3),n()),t&2){let e=u(2);o(3),d(" ",e.usuario.Pais,"")}}function H(t,i){if(t&1){let e=x();s(0,"div",11)(1,"button",12),h("click",function(){m(e);let l=u(2);return g(l.usuario.siguiendo?l.dejarDeSeguir():l.seguirUsuario())}),r(2),n()()}if(t&2){let e=u(2);o(),c("ngClass",D(3,z,e.usuario.siguiendo))("disabled",e.usuario.procesando),o(),d(" ",e.usuario.siguiendo?"Dejar de Seguir":"Seguir"," ")}}function q(t,i){if(t&1){let e=x();s(0,"div",11)(1,"button",13),h("click",function(){m(e);let l=u(2);return g(l.editarPerfil())}),v(2,"i",14),r(3," Modificar perfil "),n()()}}function B(t,i){if(t&1){let e=x();s(0,"div",17),h("mouseenter",function(){let l=m(e).$implicit;return g(l.hover=!0)})("mouseleave",function(){let l=m(e).$implicit;return g(l.hover=!1)})("click",function(){let l=m(e).$implicit,O=u(3);return g(O.verDetallesReceta(l.receta_id))}),v(1,"img",18),s(2,"div",19)(3,"h4"),r(4),n(),s(5,"p"),r(6),n(),s(7,"p")(8,"strong"),r(9,"Categor\xEDa:"),n(),r(10),n(),s(11,"p")(12,"strong"),r(13,"Dificultad:"),n(),r(14),n(),s(15,"p")(16,"strong"),r(17,"Valoraci\xF3n:"),n(),r(18),n(),s(19,"p")(20,"strong"),r(21,"Favoritos:"),n(),r(22),n(),s(23,"p")(24,"strong"),r(25,"Vistas:"),n(),r(26),n()(),s(27,"div",20)(28,"span"),r(29,"Haz click para ver el detalle de la receta"),n()()()}if(t&2){let e=i.$implicit;o(),c("src",e.imagen?e.imagen:"assets/default-receta.png",C),o(3),f(e.nombre),o(2),f(e.descripcion),o(4),d(" ",e.categoria||"Sin categor\xEDa",""),o(4),d(" ",e.dificultad||"No especificada",""),o(4),d(" ",e.valoracion_media||"-",""),o(4),d(" ",e.numfavoritos||0,""),o(4),d(" ",e.numvistas||0,""),o(),E("visible",e.hover)}}function G(t,i){if(t&1&&(S(0),s(1,"div",15),p(2,B,30,10,"div",16),n(),I()),t&2){let e=u(2);o(2),c("ngForOf",e.recetas)}}function J(t,i){t&1&&(s(0,"p"),r(1,"Este usuario a\xFAn no ha publicado recetas."),n())}function K(t,i){t&1&&(s(0,"div"),r(1,"Cargando recetas..."),n())}function L(t,i){if(t&1&&p(0,J,2,0,"p",7)(1,K,2,0,"div",7),t&2){let e=u(2);c("ngIf",!e.cargandoRecetas),o(),c("ngIf",e.cargandoRecetas)}}function Q(t,i){if(t&1&&(s(0,"div",3)(1,"div",4),v(2,"img",5),s(3,"div",6)(4,"h2"),r(5),n(),p(6,$,4,2,"p",7)(7,Y,4,1,"p",7),s(8,"p")(9,"strong"),r(10,"Seguidores:"),n(),r(11),n(),s(12,"p")(13,"strong"),r(14,"Seguidos:"),n(),r(15),n()(),p(16,H,3,5,"div",8)(17,q,4,0,"div",8),n(),s(18,"div",9)(19,"h3"),r(20),n(),p(21,G,3,1,"ng-container",10)(22,L,2,2,"ng-template",null,1,P),n()()),t&2){let e=b(23),a=u();o(2),c("src",a.usuario.Foto_de_perfil||"assets/default-avatar.png",C),o(3),f(a.usuario.Nombre_de_usuario),o(),c("ngIf",a.usuario.Nombre||a.usuario.Apellidos),o(),c("ngIf",a.usuario.Pais),o(4),d(" ",a.usuario.seguidores,""),o(4),d(" ",a.usuario.seguidos,""),o(),c("ngIf",!a.esUsuarioActual()),o(),c("ngIf",a.esUsuarioActual()),o(3),d("Recetas de ",a.usuario.Nombre_de_usuario,""),o(),c("ngIf",!a.cargandoRecetas&&a.recetas.length>0)("ngIfElse",e)}}function W(t,i){t&1&&(s(0,"div"),r(1,"Cargando datos del usuario..."),n())}function X(t,i){if(t&1&&(s(0,"div"),r(1),n()),t&2){let e=u(2);o(),f(e.error)}}function Z(t,i){if(t&1&&p(0,W,2,0,"div",7)(1,X,2,1,"div",7),t&2){let e=u();c("ngIf",e.cargando),o(),c("ngIf",e.error)}}var F=class t{constructor(i,e,a,l,O){this.route=i;this.usuariosService=e;this.recetasService=a;this.router=l;this.authService=O}usuario=null;recetas=[];cargando=!0;cargandoRecetas=!0;error=null;errorRecetas=null;usuarioActual=null;ngOnInit(){this.usuarioActual=this.authService.getCurrentUser();let i=Number(this.route.snapshot.paramMap.get("id"));i?this.usuariosService.obtenerPerfil(i).subscribe({next:e=>{this.usuario=e?.datos,this.cargando=!1,this.recetasService.obtenerRecetasDeUsuario(i).subscribe({next:a=>{this.recetas=a.datos||[],this.cargandoRecetas=!1},error:a=>{this.errorRecetas="No se pudieron cargar las recetas de este usuario",this.cargandoRecetas=!1}})},error:e=>{this.error="No se pudo cargar el usuario",this.cargando=!1}}):(this.error="ID de usuario no v\xE1lido",this.cargando=!1)}verDetallesReceta(i){console.log("Navegando a detalles de receta:",i),this.router.navigate(["/recetas/detalle",i])}esUsuarioActual(){return this.usuarioActual&&this.usuarioActual.usuario_id===this.usuario?.usuario_id}seguirUsuario(){if(!this.usuarioActual){this.router.navigate(["/login"]);return}this.usuario&&(this.usuario.procesando=!0,this.error=null,this.usuariosService.seguirUsuario(this.usuario.usuario_id).subscribe({next:i=>{console.log("Usuario seguido con \xE9xito:",i),this.usuario.siguiendo=!0,this.usuario.procesando=!1,this.usuario.seguidores=(this.usuario.seguidores||0)+1},error:i=>{console.error("Error al seguir usuario:",i),this.usuario.procesando=!1,this.error=`Error al seguir al usuario: ${i.message||"Int\xE9ntalo nuevamente"}`,i.status===0&&(this.error="No se pudo conectar con el servidor. Por favor, verifica tu conexi\xF3n a internet o int\xE9ntalo m\xE1s tarde.")}}))}dejarDeSeguir(){if(!this.usuarioActual){this.router.navigate(["/login"]);return}this.usuario&&(this.usuario.procesando=!0,this.error=null,this.usuariosService.dejarDeSeguir(this.usuario.usuario_id).subscribe({next:i=>{console.log("Respuesta al dejar de seguir:",i),this.usuario.siguiendo=!1,this.usuario.procesando=!1,this.usuario.seguidores=Math.max((this.usuario.seguidores||1)-1,0)},error:i=>{console.error("Error al dejar de seguir usuario:",i),this.usuario.procesando=!1,this.error=`Error al dejar de seguir al usuario: ${i.message||"Int\xE9ntalo nuevamente"}`,i.status===0&&(this.error="No se pudo conectar con el servidor. Por favor, verifica tu conexi\xF3n a internet o int\xE9ntalo m\xE1s tarde.")}}))}editarPerfil(){this.router.navigate(["/perfil"])}static \u0275fac=function(e){return new(e||t)(_(T),_(j),_(V),_(A),_(N))};static \u0275cmp=M({type:t,selectors:[["app-detalle-usuarios"]],decls:3,vars:2,consts:[["loadingOrError",""],["noRecetas",""],["class","detalle-usuario-container",4,"ngIf","ngIfElse"],[1,"detalle-usuario-container"],[1,"usuario-header"],["alt","Foto de perfil",1,"avatar",3,"src"],[1,"usuario-info"],[4,"ngIf"],["class","user-actions",4,"ngIf"],[1,"usuario-recetas"],[4,"ngIf","ngIfElse"],[1,"user-actions"],[3,"click","ngClass","disabled"],[1,"edit-profile-btn",3,"click"],[1,"fas","fa-edit"],[1,"recetas-lista"],["class","receta-card","style","cursor:pointer; position:relative;",3,"mouseenter","mouseleave","click",4,"ngFor","ngForOf"],[1,"receta-card",2,"cursor","pointer","position","relative",3,"mouseenter","mouseleave","click"],["alt","Imagen receta",1,"receta-img",3,"src"],[1,"receta-info"],[1,"ver-detalle-btn"]],template:function(e,a){if(e&1&&p(0,Q,24,11,"div",2)(1,Z,2,2,"ng-template",null,0,P),e&2){let l=b(2);c("ngIf",!a.cargando&&a.usuario)("ngIfElse",l)}},dependencies:[k,U,y,R],styles:[".detalle-usuario-container[_ngcontent-%COMP%]{max-width:none;width:100vw;margin:0;background:#fff;border-radius:0;box-shadow:none;padding:2rem 0}.usuario-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:2rem;border-bottom:1px solid #eee;padding-bottom:1.5rem;margin:0 auto 1.5rem;max-width:1200px;background:#fff;border-radius:16px;box-shadow:0 4px 24px #00000014;padding:2rem 2.5rem}.avatar[_ngcontent-%COMP%]{width:110px;height:110px;border-radius:50%;object-fit:cover;border:3px solid #4a90e2;background:#f5f5f5}.usuario-info[_ngcontent-%COMP%]{flex:1}.usuario-info[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:2rem;color:#333}.usuario-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.2rem 0;color:#555;font-size:1.05rem}.usuario-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#4a90e2}.user-actions[_ngcontent-%COMP%]{display:flex;gap:10px;padding:15px}.user-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1;padding:8px 0;border:none;border-radius:4px;cursor:pointer;font-weight:500;transition:all .3s;background-color:#4a90e2;color:#fff}.user-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#357ae8}.user-actions[_ngcontent-%COMP%]   button.following[_ngcontent-%COMP%]{background-color:#e0e0e0;color:#555}.user-actions[_ngcontent-%COMP%]   button.following[_ngcontent-%COMP%]:hover{background-color:#d9534f;color:#fff}.user-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.user-actions[_ngcontent-%COMP%]   button.edit-profile-btn[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;display:flex;align-items:center;justify-content:center;gap:8px}.user-actions[_ngcontent-%COMP%]   button.edit-profile-btn[_ngcontent-%COMP%]:hover{background-color:#218838}.user-actions[_ngcontent-%COMP%]   button.edit-profile-btn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:14px}.usuario-recetas[_ngcontent-%COMP%]{margin:0 auto;max-width:1200px}.recetas-lista[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:2rem}.receta-card[_ngcontent-%COMP%]{background:#fafbfc;border-radius:12px;box-shadow:0 2px 8px #0000000f;padding:1.5rem 1rem 1rem;display:flex;flex-direction:column;align-items:center;transition:box-shadow .2s;position:relative}.receta-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #4a90e226}.receta-img[_ngcontent-%COMP%]{width:100%;max-width:220px;height:140px;object-fit:cover;border-radius:8px;margin-bottom:1rem;background:#eaeaea}.receta-info[_ngcontent-%COMP%]{width:100%}.receta-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 .5rem;color:#333;font-size:1.2rem}.receta-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:.2rem 0;color:#555;font-size:1rem}.ver-detalle-btn[_ngcontent-%COMP%]{position:absolute;bottom:0;left:0;right:0;background-color:#007bffe6;color:#fff;text-align:center;padding:10px;transform:translateY(100%);opacity:0;transition:transform .3s ease,opacity .3s ease;border-radius:0 0 12px 12px;font-weight:700;font-size:1rem;pointer-events:none}.receta-card[_ngcontent-%COMP%]:hover   .ver-detalle-btn[_ngcontent-%COMP%]{transform:translateY(0);opacity:1;pointer-events:auto}@media (max-width: 600px){.detalle-usuario-container[_ngcontent-%COMP%]{padding:1rem .5rem}.usuario-header[_ngcontent-%COMP%]{flex-direction:column;gap:1rem;align-items:flex-start}.avatar[_ngcontent-%COMP%]{width:80px;height:80px}.user-actions[_ngcontent-%COMP%]{width:100%;padding:10px 0}.user-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:12px 0;font-size:16px}.recetas-lista[_ngcontent-%COMP%]{grid-template-columns:1fr}.receta-img[_ngcontent-%COMP%]{max-width:100%;height:120px}}@media (max-width: 900px){.recetas-lista[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr)}}"]})};export{F as DetalleUsuariosComponent};
