import{a as S}from"./chunk-2JGTSTN5.js";import{c as L,e as _,g as N,h as y,k as w,m as E,n as k,v as I,x as T}from"./chunk-OML2JDMB.js";import{$a as o,Ca as C,Ea as b,Ha as s,Ia as r,Ja as a,Ka as f,Kb as O,Pa as M,Qa as h,Yb as x,Zb as F,bb as P,la as l,pa as p,ta as v,ya as m}from"./chunk-KV2FSBEJ.js";function D(e,i){if(e&1&&(r(0,"div",3),o(1),a()),e&2){let t=h();l(),P(" ",t.errorMessage," ")}}function R(e,i){e&1&&(r(0,"div",8),o(1,"El nombre de usuario es obligatorio"),a())}function A(e,i){e&1&&o(0," La contrase\xF1a es obligatoria ")}function G(e,i){e&1&&o(0," La contrase\xF1a debe tener al menos 6 caracteres ")}function j(e,i){if(e&1&&(r(0,"div",8),m(1,A,1,0)(2,G,1,0),a()),e&2){let t,n=h();l(),s(!((t=n.loginForm.get("Contrasena"))==null||t.errors==null)&&t.errors.required?1:!((t=n.loginForm.get("Contrasena"))==null||t.errors==null)&&t.errors.minlength?2:-1)}}function B(e,i){e&1&&(f(0,"span",15),o(1," Iniciando sesi\xF3n... "))}function q(e,i){e&1&&o(0," Iniciar Sesi\xF3n ")}var z=class e{constructor(i,t,n){this.fb=i;this.authService=t;this.router=n;this.loginForm=this.fb.group({Nombre_de_usuario:["",[_.required]],Contrasena:["",[_.required,_.minLength(6)]]})}loginForm;errorMessage=null;isLoading=!1;onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.isLoading=!0,this.errorMessage=null,this.authService.login(this.loginForm.value).subscribe({next:()=>{this.isLoading=!1,this.router.navigate(["/home"])},error:i=>{this.isLoading=!1,i.status===401?this.errorMessage="Nombre de usuario o contrase\xF1a incorrectos":this.errorMessage="Error al iniciar sesi\xF3n. Por favor, int\xE9ntelo de nuevo m\xE1s tarde.",console.error("Login error:",i)}})}static \u0275fac=function(t){return new(t||e)(p(I),p(S),p(x))};static \u0275cmp=v({type:e,selectors:[["app-login"]],decls:28,vars:10,consts:[[1,"auth-container"],[1,"auth-card"],[1,"auth-header"],[1,"error-message"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","username"],["type","text","id","username","formControlName","Nombre_de_usuario","placeholder","Ingrese su nombre de usuario"],[1,"error-hint"],["for","password"],["type","password","id","password","formControlName","Contrasena","placeholder","Ingrese su contrase\xF1a"],[1,"form-actions"],["type","submit",1,"btn-submit",3,"disabled"],[1,"auth-footer"],["routerLink","/registro"],[1,"spinner"]],template:function(t,n){if(t&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2"),o(4,"Iniciar Sesi\xF3n"),a(),r(5,"p"),o(6,"Bienvenido de nuevo al Recetario"),a()(),m(7,D,2,1,"div",3),r(8,"form",4),M("ngSubmit",function(){return n.onSubmit()}),r(9,"div",5)(10,"label",6),o(11,"Nombre de Usuario"),a(),f(12,"input",7),m(13,R,2,0,"div",8),a(),r(14,"div",5)(15,"label",9),o(16,"Contrase\xF1a"),a(),f(17,"input",10),m(18,j,3,1,"div",8),a(),r(19,"div",11)(20,"button",12),m(21,B,2,0)(22,q,1,0),a()()(),r(23,"div",13)(24,"p"),o(25,"\xBFNo tienes una cuenta? "),r(26,"a",14),o(27,"Reg\xEDstrate aqu\xED"),a()()()()()),t&2){let c,d,u,g;l(7),s(n.errorMessage?7:-1),l(),C("formGroup",n.loginForm),l(4),b("invalid",((c=n.loginForm.get("Nombre_de_usuario"))==null?null:c.invalid)&&((c=n.loginForm.get("Nombre_de_usuario"))==null?null:c.touched)),l(),s((d=n.loginForm.get("Nombre_de_usuario"))!=null&&d.invalid&&((d=n.loginForm.get("Nombre_de_usuario"))!=null&&d.touched)?13:-1),l(4),b("invalid",((u=n.loginForm.get("Contrasena"))==null?null:u.invalid)&&((u=n.loginForm.get("Contrasena"))==null?null:u.touched)),l(),s((g=n.loginForm.get("Contrasena"))!=null&&g.invalid&&((g=n.loginForm.get("Contrasena"))!=null&&g.touched)?18:-1),l(2),C("disabled",n.loginForm.invalid||n.isLoading),l(),s(n.isLoading?21:22)}},dependencies:[O,T,w,L,N,y,E,k,F],styles:[".auth-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:calc(100vh - 80px);padding:2rem;background-color:#f8f9fa}.auth-card[_ngcontent-%COMP%]{width:100%;max-width:450px;background-color:#fff;border-radius:10px;box-shadow:0 4px 20px #00000014;padding:2.5rem}.auth-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.auth-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem;color:#333;margin-bottom:.5rem}.auth-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1rem}.error-message[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828;padding:.8rem;border-radius:4px;margin-bottom:1.5rem;font-size:.9rem}.form-group[_ngcontent-%COMP%]{margin-bottom:1.5rem}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:#333}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.8rem;border:1px solid #ddd;border-radius:4px;font-size:1rem;transition:border-color .3s}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#e74c3c}.form-group[_ngcontent-%COMP%]   input.invalid[_ngcontent-%COMP%]{border-color:#c62828}.form-group[_ngcontent-%COMP%]   .error-hint[_ngcontent-%COMP%]{color:#c62828;font-size:.8rem;margin-top:.3rem}.form-actions[_ngcontent-%COMP%]{margin-top:2rem}.form-actions[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]{width:100%;padding:.8rem;background-color:#e74c3c;color:#fff;border:none;border-radius:4px;font-size:1rem;font-weight:500;cursor:pointer;transition:background-color .3s;display:flex;justify-content:center;align-items:center}.form-actions[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]:hover{background-color:#c0392b}.form-actions[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]:disabled{background-color:#e0e0e0;color:#9e9e9e;cursor:not-allowed}.form-actions[_ngcontent-%COMP%]   .btn-submit[_ngcontent-%COMP%]   .spinner[_ngcontent-%COMP%]{width:20px;height:20px;border:2px solid rgba(255,255,255,.3);border-radius:50%;border-top-color:#fff;animation:_ngcontent-%COMP%_spin .8s linear infinite;margin-right:.5rem}.auth-footer[_ngcontent-%COMP%]{margin-top:2rem;text-align:center}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:.9rem}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#e74c3c;text-decoration:none;font-weight:500}.auth-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 576px){.auth-card[_ngcontent-%COMP%]{padding:1.5rem}}"]})};export{z as LoginComponent};
